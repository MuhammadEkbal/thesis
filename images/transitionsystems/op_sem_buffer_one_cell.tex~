% mainfile: ../../Refinement.tex
\begin{figure}[h!]
\centering
\begin{tikzpicture}%[dots/.style={white}]
  \node[initial,state] (A)                          {$\procdef{B_1}{in,out}$};
  \node[state] 	       (B) [below of=A]             {$\inp{in}{val}.\proccall{O_1}{val,in,out}$};
  \node[state] 	       (X) [below of=B, sdots]		    {$\cdots$};
  \node[state]         (C) [below of=B, left of=B]  {$\proccall{O_1}{a,in,out}$};
  \node[state]         (D) [below of=B, right of=B] {$\proccall{O_1}{z,in,out}$};
  \node[state]         (E) [below of=C,yshift=5mm]             {$\out{out}{a}.\proccall{B_1}{in,out}$};
  \node[state]         (F) [below of=D,yshift=5mm]             {$\out{out}{z}.\proccall{B_1}{in,out}$};

  \path (A) edge		node[right] 		    {$\tau$}		(B)
	(B) edge		node[ldiag]		    {$\inpa{in}{a}$}     (C)
            edge		node[rdiag]		    {$\inpa{in}{z}$}     (D)
	   % edge[dots]		node[xshift=-9.0, pos=1.1, black]   {$\cdots$} (X)
        (C) edge		node[anchor=east]		    {$\tau$}		(E)
        (D) edge		node[right]		    {$\tau$}		(F)
        (E.west) edge[bend left]	node[anchor=east]		    {$\out{out}{a}$}	(A.west)
        (F.east) edge[bend right]	node[anchor=west]		    {$\out{out}{z}$}	(A.east);
\end{tikzpicture}
\caption{The operational semantics for buffer $B_1$ from \refEx{ex_one_cell_buffer}.}
\label{fig_ts_buffer_one_cell}
\end{figure}
