\begin{figure}[H]
\centering
\begin{class}{VM(id: \integer)}
\ 
\\chan\ ex\_coffee,done\_ex\_coffee,ex\_tea,done\_ex\_tea
\ 
\\chan\ local\ in\_coffee,done\_in\_coffee,in\_tea,done\_in\_tea
\ 
\\chan\ ex\_talk:\integer \times \integer
\ 
\\chan\ local\ in\_talk:\integer \times \integer
\ 
\\chan\ done\_ex\_talk
\ 
\\chan\ local\ done\_in\_talk
\ \\ \
\\VM\_PI = ex\_coffee().\out{in\_coffee}{}
\\ \ \qquad \qquad \qquad .done\_in\_coffee().\out{done\_ex\_coffee}{}.VM\_PI 
\\ \ \qquad \qquad +\ ex\_tea().\out{in\_tea}{}
\\ \ \qquad \qquad \qquad .done\_in\_tea().\out{done\_ex\_tea}{}.VM\_PI 
\\ \ \qquad \qquad +\ in\_talk(y,z).\out{ex\_talk}{y,z}
\\ \ \qquad \qquad \qquad .done\_ex\_talk().\out{done\_in\_talk}{}.VM\_PI
\\
\begin{state}
self, cv, tv, message: \integer
\ST
0 \leq  cv \leq 3
\\
0 \leq  tv \leq 3
\end{state} 
\\
\begin{init}
self = id
\\cv = 3
\\tv = 3
\\ message= 1
\end{init} 
\\
\begin{op}{in\_coffee}
\Delta (cv)
\ST
cv' = cv - 1
\end{op}
\\
\begin{op}{in\_tea}
\Delta (tv)
\ST
tv' = tv - 1
\end{op}
\\
\begin{op}{in\_talk}
y!: \integer
\\z!: \integer
\ST
y! = message
\\z! = self
\end{op}
\end{class}
\caption{$\pi$-OZ specification of the $VM$ using non-atomic reaction.}
\label{comp_oz_pi_statefull_vm_non_atomic}
\end{figure}