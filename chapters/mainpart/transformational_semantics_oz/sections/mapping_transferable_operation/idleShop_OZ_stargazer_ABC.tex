\begin{figure}[H]
\begin{subfigure}{.6\textwidth}
\centering
\begin{class}{IdleShop(id: \integer)}
\\
\begin{state}
self, vmId, message: \integer
\\transferableOperation: nil | talk
\end{state} 
\\
\begin{init}
\\self = id
\\transferableOperation = nil
\end{init} 
\\
\begin{op}{switch\_\_\_\_\ then\ ActiveShop}
\Delta (transferableOperation)
\\x?: nil | talk
\ST
x? = transferableOperation'
\end{op}
\end{class}
  \caption{IdleShop class in OZ}
\end{subfigure}%
\begin{subfigure}{.4\textwidth}
  \centering
\fbox{  \includegraphics[width=.91\linewidth]{./images/transformational_semantics_of_oz/idleShop_OZ.png}}
  \caption{stargazer visualization}
\end{subfigure}
\caption{Transforming IdleShop into \picalc{} process IdleShop\_OZ\_PI}
\label{tra_idleShop_OZ}
\end{figure}

\lstinputlisting[backgroundcolor=\color{white},caption={The process IdleShop\_OZ\_PI in ABC code.},captionpos=b, label={tra_idleShop_OZ_listing}]{listings/idleShop_OZ.abc}